#  S&P 500 Trading Strategies using Machine Learning

## Обзор Проекта
Данный проект направлен на разработку и тестирование финансовой торговой стратегии, использующей сигнал, генерируемый моделью машинного обучения, для достижения доходности, превышающей доходность индекса S&P 500. Проект охватывает полный цикл от обработки финансовых данных и генерации признаков до обучения моделей, кросс-валидации и бэктестинга стратегии.

##  Как Запустить Проект

1.  **Клонировать репозиторий:**
    ```bash
    git clone <URL_твоего_репозитория>
    cd SP500_strategies
    ```

2.  **Установить зависимости:**
    Убедитесь, что у вас установлен Python (рекомендуется 3.8+).
    ```bash
    pip install -r requirements.txt
    ```

3.  **Подготовка данных:**
    Файлы `HistoricalData.csv` (для индекса SP500) и `all_stocks_5yr.csv` (для отдельных акций) должны быть размещены в папке `data/`.

4.  **Порядок выполнения шагов:**
    Для выполнения всего пайплайна, запустите скрипты в следующем порядке:
    -   **Генерация признаков и целевой переменной:**
        ```bash
        python scripts/features_engineering.py
        ```
    -   **Кросс-валидация и поиск по сетке (Grid Search):**
        ```bash
        python scripts/gridsearch.py
        ```
    -   **Выбор лучшей модели и генерация сигнала:**
        ```bash
        python scripts/model_selection.py
        python scripts/create_signal.py
        ```
    -   **Бэктестинг стратегии и отчет:**
        ```bash
        python scripts/strategy.py
        ```

## Глобальный Подход

1.  **Обработка Данных и Признаки:** Финансовые данные будут объединены, очищены и разделены на обучающую (train) и тестовую (test) выборки с учетом временного ряда (тест с 2017 года). Будут сгенерированы технические индикаторы (Bollinger Bands, RSI, MACD) и обеспечено **отсутствие утечки данных (no leakage)** путем правильного сдвига (shift) целевой переменной.
2.  **Машинное Обучение:** Будет реализована временная кросс-валидация (`Blocking` и `TimeSeriesSplit`). Модель (например, LightGBM, Random Forest или простая логистическая регрессия) будет обучена и оптимизирована с использованием поиска по сетке (Grid Search) только на тренировочном наборе данных. Будет выбран лучший пайплайн и сгенерирован ML-сигнал.
3.  **Бэктестинг Стратегии:** На основе ML-сигнала будет разработана торговая стратегия (например, `Long Only` или `Stock Picking`). Стратегия будет протестирована на исторических данных (бэктестинг), и будут рассчитаны ключевые метрики (PnL, Max Drawdown). Результаты будут представлены в отчете.

---